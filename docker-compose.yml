services:
  server:
    build:
      context: .
      target: dev # Use the dev stage from Dockerfile
    container_name: dev
    env_file:
      - ".env"
    ports:
      - "8080:8080"
    volumes:
      # Mount source code for hot reload
      - .:/usr/src/app
      # Use container-managed node_modules (avoids OS conflicts)
      - /usr/src/app/node_modules
    command: npm run dev
